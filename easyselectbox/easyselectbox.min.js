(function(e){function t(t){var a=e(this),o=a.data("easySelectData"),d=o.selectObj,n=o.displayer,r=o.dropdown,c=o.options;if(e(t.target).get(0)==n.get(0)||e(t.target).get(0)==a.get(0))r.is(":visible")?i(r,c.speed):s(r,c.speed);else if(e(t.target).is("."+c.classNames.item)){var p=r.find("."+c.classNames.item).index(e(t.target));l(d,p),null!=c.onClick&&c.onClick.call(this,{value:d.val(),text:d.find("option").eq(p).html()})}else if(e("."+c.classNames.item).has(e(t.target)).length>0){var p=r.find("."+c.classNames.item).index(e(t.target).parents("."+c.classNames.item));l(d,p),null!=c.onClick&&c.onClick.call(this,{value:d.val(),text:d.find("option").eq(p).html()})}t.stopPropagation()}function s(e,t){e.slideDown(t)}function i(e,t){e.slideUp(t)}function a(t){var s=e(this),i=s.data("easySelectData");i.selectObj,i.displayer,i.dropdown,i.options,s.addClass("focused"),window.clearTimeout(i.timer),t.stopPropagation()}function o(t){var s=e(this),a=s.data("easySelectData");a.selectObj,a.displayer;var o=a.dropdown,l=a.options;s.removeClass("focused"),o.is(":visible")&&(a.timer=window.setTimeout(function(){i(o,l.speed)},100),s.data("easySelectData",a)),t.stopPropagation()}function l(e,t){var s=e.data("easySelect"),a=s.data("easySelectData"),o=a.displayer,l=a.dropdown,d=a.options,n=e.find("option").eq(t);o.html(n.html()),e.find("option").removeAttr("selected"),n.attr("selected","selected"),e.trigger("change"),l.is(":visible")&&i(l,d.speed)}function d(e,t,s,i){t.css({width:i.outerWidth()}),borderWidth=parseInt(s.css("border-left-width"),10)+parseInt(s.css("border-right-width"),10),s.css({width:t.width()-borderWidth})}var n={init:function(s){var i={classNames:{selectbox:"",displayer:"esb-displayer",dropdown:"esb-dropdown",item:"esb-item"},disabled:!1,onBuildList:null,onClick:null,speed:0};return s=e.extend(!0,{},i,s),this.each(function(){var i=e(this);if("select"!=i[0].nodeName.toLowerCase())e.error("Not a SELECT element on jQuery.easySelectBox");else{var l=i.children("option"),n=null,r=i.val(),c=s.classNames.selectbox,p=s.classNames.displayer,u=s.classNames.dropdown,y=s.classNames.item,v=0,f="",b="";e.each(l,function(t,s){text=e(s).text(),""==text&&(text="&nbsp;"),b+='<div class="'+y+'">'+text+"</div>",r==e(s).val()&&(v=t)}),b='<div class="'+u+'">'+b+"</div>",f='<div class="'+p+'">'+l.eq(v).text()+"</div>",null!=s.onBuildList&&(b=s.onBuildList.call(this,{selectObj:i,options:s,lists:l,initialVal:r})),easySelectHtml='<div tabindex="0" class="easy-select-box '+c+'">'+f+b+"</div>",n=e(easySelectHtml).insertAfter(i),n.addClass("easy-select-"+e("body").find(".easy-select-box").index(n)),displayer=n.children("."+p),dropdown=n.children("."+u),d(i,n,dropdown,displayer),i.hide(),i.data("easySelect",n),n.data("easySelectData",{options:s,selectObj:i,displayer:displayer,dropdown:dropdown,timer:null}),i.attr("disabled")||s.disabled?n.addClass("disabled"):(n.bind("click.easyselectbox",t),n.bind("focusin.easyselectbox",a),n.bind("focusout.easyselectbox",o))}})},option:function(s,i){if("value"==s&&void 0==i)return e(this).val();if("speed"==s&&void 0==i){var d=e(this),n=d.data("easySelect"),r=n.data("easySelectData"),c=r.options;return c.speed}return this.each(function(){var d=e(this),n=d.data("easySelect");if(void 0==n)e.error("easySelectBox not initialized yet.");else{var r=n.data("easySelectData");if(r.displayer,r.dropdown,r.options,"value"==s){if(void 0!=i){d.val(i);var c=d.find("option:selected").index();l(d,c)}}else"index"==s?void 0!=i&&l(d,i):"speed"==s?void 0!=i&&(r.options.speed=i,n.data("easySelectData",r)):"disabled"==s&&void 0!==i&&(0==i?(n.removeClass("disabled"),n.bind("click.easyselectbox",t),n.bind("focusin.easyselectbox",a),n.bind("focusout.easyselectbox",o)):(n.addClass("disabled"),n.unbind("click.easyselectbox"),n.unbind("focusin.easyselectbox"),n.unbind("focusout.easyselectbox")))}})},open:function(t){return this.each(function(){var i=e(this),a=i.data("easySelect");if(void 0==a)e.error("easySelectBox not initialized yet.");else{var o=a.data("easySelectData"),i=o.selectObj;o.displayer;var l=o.dropdown,d=o.options;(null==t||0==t)&&a.focus(),l.is(":visible")||s(l,d.speed)}})},close:function(){return this.each(function(){var t=e(this),s=t.data("easySelect");if(void 0==s)e.error("easySelectBox not initialized yet.");else{var a=s.data("easySelectData"),t=a.selectObj;a.displayer;var o=a.dropdown,l=a.options;o.is(":visible")&&i(o,l.speed)}})},select:function(t,s){return this.each(function(){var i=e(this),a=i.data("easySelect");if(void 0==a)e.error("easySelectBox not initialized yet.");else{var o=a.data("easySelectData"),i=o.selectObj;o.displayer,o.dropdown,o.options,(void 0==s||null==s)&&(s=!1);var d=-1;1==s?d=i.find('option[value="'+t+'"]').index():""==t?d=i.find("option:empty").index():i.find("option").each(function(s){return e(this).html()==t?(d=s,void 0):void 0}),l(i,d)}})}};e.fn.easySelectBox=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.easySelectBox"),!1):n.init.apply(this,arguments)}})(jQuery);
